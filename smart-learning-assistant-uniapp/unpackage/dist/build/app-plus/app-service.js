if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then(n=>t.resolve(e()).then(()=>n),n=>t.resolve(e()).then(()=>{throw n}))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}const n=(e,t)=>{const n=e.__vccOpts||e;for(const[a,o]of t)n[a]=o;return n};__definePage("pages/index/index",n({data:()=>({statusBarHeight:0,webviewUrl:"",loading:!0,isTablet:!1,screenWidth:0}),onLoad(){const e=uni.getSystemInfoSync();this.statusBarHeight=e.statusBarHeight||0,this.screenWidth=e.screenWidth,this.isTablet=this.checkIsTablet(e),this.setupWebView(),uni.setNavigationBarTitle({title:"智学宝"}),t("log","at pages/index/index.vue:65","设备信息:",{screenWidth:this.screenWidth,isTablet:this.isTablet,platform:e.platform})},onShow(){t("log","at pages/index/index.vue:73","页面显示")},methods:{setupWebView(){this.webviewUrl="/static/smart-learning-assistant.html",t("log","at pages/index/index.vue:93","WebView URL:",this.webviewUrl)},handleMessage(e){t("log","at pages/index/index.vue:97","收到WebView消息:",e.detail.data);const n=e.detail.data[0];"toast"===n.type?uni.showToast({title:n.message,icon:n.icon||"none"}):"share"===n.type?this.shareContent(n.content):"storage"===n.type&&this.handleStorage(n)},handleError(e){t("error","at pages/index/index.vue:115","WebView加载错误:",e),this.loading=!1,uni.showModal({title:"加载失败",content:"页面加载失败，请检查网络连接后重试",confirmText:"重试",success:e=>{e.confirm&&this.refreshWebView()}})},handleLoad(e){t("log","at pages/index/index.vue:130","WebView加载完成:",e),this.loading=!1,this.sendMessageToWebView({type:"init",platform:this.getPlatform(),statusBarHeight:this.statusBarHeight})},refreshWebView(){this.loading=!0;const e=this.webviewUrl;this.webviewUrl="",this.$nextTick(()=>{this.webviewUrl=e+"?t="+Date.now()})},goHome(){this.sendMessageToWebView({type:"navigate",action:"home"})},showAbout(){uni.showModal({title:"关于应用",content:"智学宝 v1.0.0\n\nAI驱动的智能学习平台，帮助您高效学习各种知识。\n\n© 2024 智学宝团队",confirmText:"确定",showCancel:!1})},sendMessageToWebView(e){t("log","at pages/index/index.vue:171","向WebView发送消息:",e)},shareContent(e){uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:e.url||"",title:e.title||"智学宝",summary:e.description||"来自智学宝的分享",imageUrl:e.image||"",success:function(e){t("log","at pages/index/index.vue:186","分享成功")},fail:function(e){t("log","at pages/index/index.vue:189","分享失败:",e)}})},handleStorage(e){if("set"===e.action)uni.setStorageSync(e.key,e.value);else if("get"===e.action){const t=uni.getStorageSync(e.key);this.sendMessageToWebView({type:"storage_result",key:e.key,value:t})}else"remove"===e.action&&uni.removeStorageSync(e.key)},getPlatform:()=>"app",checkIsTablet(e){const{screenWidth:t,screenHeight:n,pixelRatio:a}=e,o=t/a,i=n/a;return Math.sqrt(o*o+i*i)/160>=7||t>=768}},onUnload(){t("log","at pages/index/index.vue:264","页面卸载")},onHide(){t("log","at pages/index/index.vue:268","页面隐藏")}},[["render",function(t,n,a,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[i.loading?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading-container"},[e.createElementVNode("view",{class:"loading-spinner"}),e.createElementVNode("text",{class:"loading-text"},"正在加载智能学习助手...")])):e.createCommentVNode("",!0),e.createElementVNode("web-view",{src:i.webviewUrl,onMessage:n[0]||(n[0]=(...e)=>r.handleMessage&&r.handleMessage(...e)),onError:n[1]||(n[1]=(...e)=>r.handleError&&r.handleError(...e)),onLoad:n[2]||(n[2]=(...e)=>r.handleLoad&&r.handleLoad(...e)),class:"webview",style:e.normalizeStyle({opacity:i.loading?0:1})},null,44,["src"]),i.loading?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"toolbar"},[e.createElementVNode("view",{class:"toolbar-item",onClick:n[3]||(n[3]=(...e)=>r.refreshWebView&&r.refreshWebView(...e))},[e.createElementVNode("text",{class:"toolbar-icon"},"🔄"),e.createElementVNode("text",{class:"toolbar-text"},"刷新")]),e.createElementVNode("view",{class:"toolbar-item",onClick:n[4]||(n[4]=(...e)=>r.goHome&&r.goHome(...e))},[e.createElementVNode("text",{class:"toolbar-icon"},"🏠"),e.createElementVNode("text",{class:"toolbar-text"},"首页")]),e.createElementVNode("view",{class:"toolbar-item",onClick:n[5]||(n[5]=(...e)=>r.showAbout&&r.showAbout(...e))},[e.createElementVNode("text",{class:"toolbar-icon"},"ℹ️"),e.createElementVNode("text",{class:"toolbar-text"},"关于")])]))])}],["__scopeId","data-v-67129351"]]));const a=n({onLaunch:function(){t("log","at App.vue:10","App Launch")},onShow:function(){t("log","at App.vue:13","App Show")},onHide:function(){t("log","at App.vue:16","App Hide")}},[["render",function(t,n,a,o,i,r){return e.openBlock(),e.createElementBlock("view",{id:"app"})}]]);const{app:o,Vuex:i,Pinia:r}={app:e.createVueApp(a)};uni.Vuex=i,uni.Pinia=r,o.provide("__globalStyles",__uniConfig.styles),o._component.mpType="app",o._component.render=()=>{},o.mount("#app")}(Vue);
